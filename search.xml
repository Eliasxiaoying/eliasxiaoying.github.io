<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>IdentityServer ä»‹ç»</title>
      <link href="/2023/07/30/IdentityServer-%E4%BB%8B%E7%BB%8D/"/>
      <url>/2023/07/30/IdentityServer-%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<p># Identity Server 4 ä»‹ç»</p><h2 id="ä»€ä¹ˆæ˜¯-Cookiesã€Session"><a href="#ä»€ä¹ˆæ˜¯-Cookiesã€Session" class="headerlink" title="ä»€ä¹ˆæ˜¯ Cookiesã€Session"></a>ä»€ä¹ˆæ˜¯ Cookiesã€Session</h2><p><strong>Cookies æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­çš„å°å‹æ–‡æœ¬æ–‡ä»¶</strong>ï¼Œç”¨äºå­˜å‚¨ Web åº”ç”¨ç¨‹åºçš„ç”¨æˆ·èº«ä»½éªŒè¯ä¿¡æ¯å’Œå…¶ä»–çŠ¶æ€ä¿¡æ¯ã€‚å½“ç”¨æˆ·è®¿é—® Web åº”ç”¨ç¨‹åºæ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘å®¢æˆ·ç«¯æµè§ˆå™¨å‘é€ä¸€ä¸ªåŒ…å«Cookie ä¿¡æ¯çš„HTTPå“åº”å¤´ã€‚æµè§ˆå™¨ä¼šå°†è¿™äº› Cookie ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå¹¶åœ¨éšåçš„æ¯ä¸ªè¯·æ±‚ä¸­å°†å®ƒä»¬ä½œä¸º HTTP è¯·æ±‚å¤´å‘é€å›æœåŠ¡å™¨ã€‚è¿™ä½¿å¾— Web åº”ç”¨ç¨‹åºèƒ½å¤Ÿåœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´ä¿æŒçŠ¶æ€ï¼Œå¹¶ä¿è¯ç”¨æˆ·çš„èº«ä»½éªŒè¯ä¿¡æ¯å¾—ä»¥ä¿ç•™ã€‚Cookies å¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä»¥ä¾¿æµè§ˆå™¨åœ¨ä¸€å®šæ—¶é—´ååˆ é™¤å®ƒä»¬ã€‚</p><p><strong>Session æ˜¯ä¸€ç§åœ¨WebæœåŠ¡å™¨ä¸Šå­˜å‚¨ç”¨æˆ·çŠ¶æ€ä¿¡æ¯çš„æœºåˆ¶</strong>ã€‚å½“ç”¨æˆ·é¦–æ¬¡è®¿é—® Web åº”ç”¨ç¨‹åºæ—¶ï¼ŒæœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Sessionï¼Œå¹¶å°† Session IDï¼ˆä¸€ç§å”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼‰å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ã€‚æµè§ˆå™¨ä¼šå°†è¯¥ Session ID ä½œä¸ºCookieä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°ï¼Œå¹¶åœ¨éšåçš„æ¯ä¸ªè¯·æ±‚ä¸­å°†å…¶ä½œä¸ºHTTP è¯·æ±‚å¤´å‘é€å›æœåŠ¡å™¨ã€‚æœåŠ¡å™¨ä½¿ç”¨ Session ID æ¥æ£€ç´¢ä¸è¯¥ç”¨æˆ·ç›¸å…³è”çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶åœ¨æ¯ä¸ªè¯·æ±‚æœŸé—´æ›´æ–°å®ƒä»¬ã€‚Session ä¸ Cookie çš„å…³ç³»åœ¨äºï¼ŒSession ID é€šå¸¸æ˜¯å­˜å‚¨åœ¨ Cookie ä¸­çš„ï¼Œä»¥ä¾¿æµè§ˆå™¨å¯ä»¥åœ¨æ¯ä¸ªè¯·æ±‚ä¸­å°†å…¶å‘é€å›æœåŠ¡å™¨ã€‚</p><p><strong>æœ€æ—©çš„Webåº”ç”¨ç¨‹åºä½¿ç”¨ HTTP Authentication æ¥å®ç°èº«ä»½éªŒè¯å’Œæˆæƒã€‚</strong>è¿™ç§è®¤è¯æœºåˆ¶éœ€è¦ç”¨æˆ·åœ¨æ¯ä¸ªè¯·æ±‚ä¸­æä¾›ç”¨æˆ·åå’Œå¯†ç ï¼ŒæœåŠ¡å™¨é€šè¿‡æ¯”è¾ƒè¿™äº›ä¿¡æ¯æ¥éªŒè¯ç”¨æˆ·èº«ä»½ã€‚è™½ç„¶è¿™ç§æœºåˆ¶ç®€å•æ˜“ç”¨ï¼Œä½†å®ƒå­˜åœ¨ä¸€äº›å®‰å…¨é—®é¢˜ï¼Œå¦‚æ˜æ–‡ä¼ è¾“å¯†ç ç­‰ã€‚</p><p>éšç€ Web åº”ç”¨ç¨‹åºçš„å‘å±•ï¼ŒCookie æˆä¸ºä¸€ç§ç”¨äºå­˜å‚¨ç”¨æˆ·è®¤è¯ä¿¡æ¯çš„å¸¸è§æ–¹æ³•ã€‚å½“ç”¨æˆ·é¦–æ¬¡è¿›è¡Œèº«ä»½éªŒè¯æ—¶ï¼ŒæœåŠ¡å™¨ä¼šå‘å®¢æˆ·ç«¯æµè§ˆå™¨å‘é€ä¸€ä¸ª Cookieï¼ŒåŒ…å«ä¸€ä¸ªåŠ å¯†çš„èº«ä»½éªŒè¯ä»¤ç‰Œã€‚æµè§ˆå™¨åœ¨éšåçš„æ¯ä¸ªè¯·æ±‚ä¸­éƒ½ä¼šé™„å¸¦è¯¥ Cookieï¼Œä»¥ä¾¿æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·ã€‚è¿™ç§åŸºäº Cookie çš„è®¤è¯æœºåˆ¶æ¯”HTTP Authentication æ›´å®‰å…¨ï¼Œä½†ä»ç„¶å­˜åœ¨ä¸€äº›å®‰å…¨é—®é¢˜ï¼Œå¦‚ Cookie åŠ«æŒç­‰ã€‚</p><blockquote><p>CookieåŠ«æŒæ˜¯ä¸€ç§ç½‘ç»œæ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡çªƒå–ç”¨æˆ·çš„Cookieæ¥å†’å……ç”¨æˆ·èº«ä»½ï¼Œä»è€Œè·å–æœªç»æˆæƒçš„è®¿é—®æƒé™ã€‚ä¸€æ—¦æ”»å‡»è€…çªƒå–äº†ç”¨æˆ·çš„Cookieï¼Œå°±å¯ä»¥å°†å…¶å¤åˆ¶åˆ°è‡ªå·±çš„æµè§ˆå™¨ä¸­ï¼Œå¹¶åœ¨éšåçš„è¯·æ±‚ä¸­ä½¿ç”¨è¯¥Cookieæ¥å†’å……ç”¨æˆ·èº«ä»½ï¼Œä»è€Œè·å–æœªç»æˆæƒçš„è®¿é—®æƒé™ã€‚</p></blockquote><p>ä¸ºäº†è§£å†³CookieåŠ«æŒç­‰å®‰å…¨é—®é¢˜ï¼ŒWebåº”ç”¨ç¨‹åºå¼€å§‹ä½¿ç”¨åŸºäºSessionçš„è®¤è¯æœºåˆ¶ã€‚åœ¨è¿™ç§æœºåˆ¶ä¸­ï¼ŒæœåŠ¡å™¨ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªSessionï¼Œå¹¶å°†Session IDå­˜å‚¨åœ¨Cookieä¸­ã€‚éšåçš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šé™„å¸¦è¯¥Cookieï¼Œä»¥ä¾¿æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·ã€‚è¿™ç§æœºåˆ¶æ¯”åŸºäºCookieçš„è®¤è¯æ›´åŠ å®‰å…¨ï¼Œä½†ä»ç„¶å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå¦‚SessionåŠ«æŒç­‰ã€‚</p><p>éšç€åˆ†å¸ƒå¼ç³»ç»Ÿå’ŒåŸºäºå¾®æœåŠ¡çš„åº”ç”¨ç¨‹åºçš„å…´èµ·ï¼ŒåŸºäºTokençš„è®¤è¯æœºåˆ¶é€æ¸æˆä¸ºä¸€ç§æµè¡Œçš„é€‰æ‹©ã€‚åœ¨è¿™ç§æœºåˆ¶ä¸­ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªç”¨æˆ·ç”Ÿæˆä¸€ä¸ªåŠ å¯†çš„ Tokenï¼Œå¹¶å°†å…¶å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ã€‚æµè§ˆå™¨åœ¨éšåçš„æ¯ä¸ªè¯·æ±‚ä¸­éƒ½ä¼šé™„å¸¦è¯¥Tokenï¼Œä»¥ä¾¿æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·ã€‚è¿™ç§æœºåˆ¶ä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå­˜å‚¨ä»»ä½•çŠ¶æ€ä¿¡æ¯ï¼Œæ›´åŠ é€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿå’ŒåŸºäºå¾®æœåŠ¡çš„åº”ç”¨ç¨‹åºã€‚</p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨Token"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Token" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Token"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Token</h2><p><strong>å®‰å…¨æ€§é«˜</strong>ã€<strong>ç§»æ¤æ€§å¼º</strong></p><ol><li>å®‰å…¨æ€§é«˜ï¼šTokenå¯ä»¥åŠ å¯†ï¼Œå¹¶ä¸”<strong>èƒ½å¤ŸéªŒè¯æ˜¯å¦è¢«ä¿®æ”¹ï¼Œå®‰å…¨æ€§æ›´é«˜ã€‚</strong></li><li>ç§»æ¤æ€§å¼ºï¼šCookieæ˜¯æµè§ˆå™¨è¿›è¡Œæ§åˆ¶çš„ï¼ŒSessionæ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸­çš„ï¼ŒToken<strong>æ— çŠ¶æ€ï¼ˆåªå­˜å‚¨ç”¨æˆ·çš„éƒ¨åˆ†å…³é”®ä¿¡æ¯ï¼‰</strong>ï¼Œæ˜¯<strong>ç”±å®¢æˆ·ç«¯è¿›è¡Œç®¡ç†</strong>çš„ï¼Œä¸”<strong>å¯ä»¥è·¨åŸŸä½¿ç”¨</strong>ï¼Œ<strong>å¯ä»¥åœ¨å¤šä¸ªè®¾å¤‡ä¹‹é—´å…±äº«ã€å¯ä»¥å•ç‹¬å­˜å‚¨</strong>ã€‚</li></ol><p>éšç€åˆ†å¸ƒå¼ç³»ç»Ÿå’ŒåŸºäºå¾®æœåŠ¡çš„åº”ç”¨ç¨‹åºçš„å…´èµ·ï¼ŒåŸºäºTokençš„è®¤è¯æœºåˆ¶é€æ¸æˆä¸ºä¸€ç§æµè¡Œçš„é€‰æ‹©ã€‚åœ¨è¿™ç§æœºåˆ¶ä¸­ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ¯ä¸ªç”¨æˆ·ç”Ÿæˆä¸€ä¸ªåŠ å¯†çš„Tokenï¼Œå¹¶å°†å…¶å‘é€åˆ°å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ã€‚æµè§ˆå™¨åœ¨éšåçš„æ¯ä¸ªè¯·æ±‚ä¸­éƒ½ä¼šé™„å¸¦è¯¥Tokenï¼Œä»¥ä¾¿æœåŠ¡å™¨è¯†åˆ«ç”¨æˆ·ã€‚è¿™ç§æœºåˆ¶ä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå­˜å‚¨ä»»ä½•çŠ¶æ€ä¿¡æ¯ï¼Œæ›´åŠ é€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿå’ŒåŸºäºå¾®æœåŠ¡çš„åº”ç”¨ç¨‹åºã€‚</p><p>image-20230730160629167.png<br><img src="/images/pasted-3.png" alt="upload successful"></p><p>ä¸Šé¢æ˜¯ä¸€ä¸ª <code>JWT Token</code>çš„ç¤ºä¾‹</p><p><code>JWT Token</code> ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šHeaderï¼ˆå¤´éƒ¨ï¼‰ã€Payloadï¼ˆè½½è·ï¼‰å’Œ Signatureï¼ˆç­¾åï¼‰ã€‚å…¶ä¸­ï¼ŒHeader åŒ…å«äº† <code>JWT Token</code> çš„ç±»å‹å’Œä½¿ç”¨çš„ç®—æ³•ç­‰ä¿¡æ¯ï¼ŒPayload åŒ…å«äº†è¦ä¼ è¾“çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·IDã€ç”¨æˆ·åã€è§’è‰²ç­‰ï¼ŒSignature åˆ™æ˜¯å¯¹ Header å’Œ Payload çš„ç­¾åï¼Œç”¨äºéªŒè¯æ•°æ®çš„å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Identity-Server"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Identity-Server" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Identity Server"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Identity Server</h2><p>6ae2d600058d433aa3ffb65ae925cc8etplv-k3u1fbpfcp-zoom-in-crop-mark4536000.webp<br><img src="/images/pasted-4.png" alt="upload successful"></p><ol><li>è”åˆç™»é™†ï¼šé€šè¿‡å¼€æ”¾è®¤è¯å¹³å°ç”±ç¬¬ä¸‰æ–¹åº”ç”¨åšèº«ä»½æ‹…ä¿ï¼Œä½¿ç”¨æˆ·å¯ä»¥æ´»å¾—æœ¬ç³»ç»Ÿçš„ç›¸å…³æƒé™ã€‚</li><li>å•ç‚¹ç™»é™†ï¼šå°†ç”¨æˆ·çš„ä¿¡æ¯é›†ä¸­ç®¡ç†ï¼Œä¸åŒç³»ç»Ÿä¹‹é—´å¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå…±äº«ã€‚</li></ol><p>ï¼ˆä½¿ç”¨<a href="https://www.cnblogs.com/" target="_blank" rel="noopener">åšå®¢å›­</a>ã€<a href="https://gitee.com/" target="_blank" rel="noopener">Gitee</a>ã€<a href="https://github.com/" target="_blank" rel="noopener">Github</a> è¿›è¡Œæ¼”ç¤ºï¼‰</p><h2 id="Identity-Server-èƒ½åšä»€ä¹ˆ"><a href="#Identity-Server-èƒ½åšä»€ä¹ˆ" class="headerlink" title="Identity Server èƒ½åšä»€ä¹ˆ"></a>Identity Server èƒ½åšä»€ä¹ˆ</h2><p><a href="http://www.ruanyifeng.com/blog/2019/04/oauth_design.html" target="_blank" rel="noopener">OAuth 2.0 çš„ä¸€ä¸ªç®€å•è§£é‡Š - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)</a></p><p><a href="https://www.cnblogs.com/yangxu-pro/p/9405796.html" target="_blank" rel="noopener">å­¦ä¹ Identity Server 4çš„é¢„å¤‡çŸ¥è¯† (è¯¯åˆ , é‡è¡¥) - yangxu-pro - åšå®¢å›­ (cnblogs.com)</a></p><p><a href="https://www.cnblogs.com/savorboard/p/aspnetcore-identity.html" target="_blank" rel="noopener">ASP.NET Core ä¹‹ Identity å…¥é—¨ï¼ˆä¸€ï¼‰ - Savorboard - åšå®¢å›­ (cnblogs.com)</a></p><p>ç®€å•æ¥è¯´ï¼ŒIdentity Server ä¸­å®ç°äº†ä¸¤ç§åŠŸèƒ½ï¼Œåˆ†åˆ«å¯¹åº”äº†ä¸¤ç§åè®®ï¼š</p><p>è®¤è¯ <code>Authentication</code>ï¼šè§£å†³äº† <strong>â€ä½ æ˜¯è°â€œ</strong> çš„é—®é¢˜ã€‚ å¯¹åº”åè®®ï¼š<code>OpenIdConnect</code></p><p>æˆæƒ <code>Authorization</code>ï¼šè§£å†³äº† <strong>â€ä½ èƒ½åšä»€ä¹ˆï¼Œä¸èƒ½åšä»€ä¹ˆâ€œ</strong> çš„é—®é¢˜ã€‚å¯¹åº”åè®®ï¼š<code>OAuth2.0</code></p><h2 id="æˆæƒè®¤è¯çš„äº”ç§æ¨¡å¼"><a href="#æˆæƒè®¤è¯çš„äº”ç§æ¨¡å¼" class="headerlink" title="æˆæƒè®¤è¯çš„äº”ç§æ¨¡å¼"></a>æˆæƒè®¤è¯çš„äº”ç§æ¨¡å¼</h2><p><a href="http://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html" target="_blank" rel="noopener">OAuth 2.0 çš„å››ç§æ–¹å¼ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)</a></p><ol><li>å¯†ç å¼ï¼ˆpasswordï¼‰</li><li><p>å®¢æˆ·ç«¯å‡­è¯ï¼ˆclient credentialsï¼‰</p></li><li><p>äº¤äº’å¼ï¼ˆimplicitï¼‰</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant ç”¨æˆ·</span><br><span class="line">participant å®¢æˆ·ç«¯</span><br><span class="line">participant æˆæƒæœåŠ¡å™¨</span><br><span class="line">ç”¨æˆ·-&gt;&gt;+å®¢æˆ·ç«¯: è®¿é—®å®¢æˆ·ç«¯ï¼Œä¸”ä¸å­˜åœ¨Token</span><br><span class="line">å®¢æˆ·ç«¯ -&gt;&gt; æˆæƒæœåŠ¡å™¨: å®¢æˆ·ç«¯è¯·æ±‚æˆæƒæœåŠ¡å™¨è·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; æˆæƒæœåŠ¡å™¨: æˆæƒæœåŠ¡å™¨éªŒè¯å®¢æˆ·ç«¯ä¿¡æ¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; ç”¨æˆ·: å®¢æˆ·ç«¯å°†ç”¨æˆ·é‡å®šå‘è‡³æˆæƒæœåŠ¡å™¨è¿›è¡Œæˆæƒ</span><br><span class="line">ç”¨æˆ· -&gt;&gt; æˆæƒæœåŠ¡å™¨: ç”¨æˆ·é€šè¿‡è´¦å·å¯†ç è¿›è¡Œæˆæƒ</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; æˆæƒæœåŠ¡å™¨: æˆæƒæœåŠ¡å™¨å¯¹ç”¨æˆ·å’Œå®¢æˆ·ç«¯è¿›è¡ŒéªŒè¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; å®¢æˆ·ç«¯: æˆæƒæœåŠ¡å™¨å°†ç”¨æˆ·å…è®¸è®¿é—®çš„ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯</span><br><span class="line">å®¢æˆ·ç«¯-&gt;&gt;ç”¨æˆ·: ç”¨æˆ·ç™»é™†æˆåŠŸ</span><br></pre></td></tr></table></figure><ol><li>æˆæƒç å¼ï¼ˆauthorization-codeï¼‰</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant ç”¨æˆ·</span><br><span class="line">participant å®¢æˆ·ç«¯</span><br><span class="line">participant æˆæƒæœåŠ¡å™¨</span><br><span class="line">ç”¨æˆ·-&gt;&gt;+å®¢æˆ·ç«¯: è®¿é—®å®¢æˆ·ç«¯ï¼Œä¸”ä¸å­˜åœ¨Token</span><br><span class="line">å®¢æˆ·ç«¯ -&gt;&gt; æˆæƒæœåŠ¡å™¨: å®¢æˆ·ç«¯è¯·æ±‚æˆæƒæœåŠ¡å™¨è·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; æˆæƒæœåŠ¡å™¨: æˆæƒæœåŠ¡å™¨éªŒè¯å®¢æˆ·ç«¯ä¿¡æ¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; ç”¨æˆ·: å®¢æˆ·ç«¯å°†ç”¨æˆ·é‡å®šå‘è‡³æˆæƒæœåŠ¡å™¨è¿›è¡Œæˆæƒ</span><br><span class="line">ç”¨æˆ· -&gt;&gt; æˆæƒæœåŠ¡å™¨: ç”¨æˆ·é€šè¿‡è´¦å·å¯†ç è¿›è¡Œæˆæƒ</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; æˆæƒæœåŠ¡å™¨: æˆæƒæœåŠ¡å™¨å¯¹ç”¨æˆ·å’Œå®¢æˆ·ç«¯è¿›è¡ŒéªŒè¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; å®¢æˆ·ç«¯: æˆæƒæœåŠ¡å™¨å°†ç”¨æˆ·å…è®¸è®¿é—®çš„ä¿¡æ¯ä»¥æˆæƒç å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯</span><br><span class="line">å®¢æˆ·ç«¯ -&gt;&gt; æˆæƒæœåŠ¡å™¨: å®¢æˆ·ç«¯åœ¨ç½‘ç«™åç«¯è¯·æ±‚æˆæƒæœåŠ¡å™¨, é€šè¿‡æˆæƒç è·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; å®¢æˆ·ç«¯: å®¢æˆ·ç«¯æˆåŠŸè·å–ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">å®¢æˆ·ç«¯-&gt;&gt;ç”¨æˆ·: ç”¨æˆ·ç™»é™†æˆåŠŸ</span><br></pre></td></tr></table></figure><ol><li>è®¾å¤‡æµå¼ï¼ˆdeviceflowï¼‰</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">participant ç”¨æˆ·</span><br><span class="line">participant å®¢æˆ·ç«¯</span><br><span class="line">participant æˆæƒæœåŠ¡å™¨</span><br><span class="line">ç”¨æˆ·-&gt;&gt;+å®¢æˆ·ç«¯: è®¿é—®å®¢æˆ·ç«¯</span><br><span class="line">å®¢æˆ·ç«¯ -&gt;&gt; æˆæƒæœåŠ¡å™¨: å®¢æˆ·ç«¯è¯·æ±‚æˆæƒæœåŠ¡å™¨</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; æˆæƒæœåŠ¡å™¨: æˆæƒæœåŠ¡å™¨éªŒè¯å®¢æˆ·ç«¯ä¿¡æ¯</span><br><span class="line">æˆæƒæœåŠ¡å™¨ -&gt;&gt; å®¢æˆ·ç«¯: æˆæƒæœåŠ¡å™¨å°†ç”¨æˆ·ç ã€è®¾å¤‡ç ã€ä»¥åŠç”¨æˆ·æˆæƒåœ°å€è¿”å›å®¢æˆ·ç«¯</span><br><span class="line">å®¢æˆ·ç«¯ -&gt;&gt; ç”¨æˆ·: å®¢æˆ·ç«¯å°†ç”¨æˆ·å¯¼å‘æˆæƒæœåŠ¡å™¨è®¾ç½®çš„æˆæƒåœ°å€</span><br><span class="line">ç”¨æˆ· -&gt;&gt; æˆæƒæœåŠ¡å™¨: ç”¨æˆ·åœ¨æˆæƒæœåŠ¡å™¨åˆ¶å®šçš„åœ°å€å¯¹å®¢æˆ·ç«¯è¿›è¡Œæˆæƒ</span><br><span class="line">loop</span><br><span class="line">        å®¢æˆ·ç«¯ -&gt;&gt; æˆæƒæœåŠ¡å™¨: å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚Token, å¦‚æœç”¨æˆ·æˆæƒï¼ŒæˆæƒæœåŠ¡å™¨å°±è¿”å›tokenä¿¡æ¯ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¼šåœ¨æŒ‡å®šæ—¶é—´é—´éš”åå†æ¬¡è¯·æ±‚ï¼Œç›´è‡³æˆæƒè¶…æ—¶</span><br><span class="line">        æˆæƒæœåŠ¡å™¨ -&gt;&gt; å®¢æˆ·ç«¯: Token</span><br><span class="line">end</span><br><span class="line">å®¢æˆ·ç«¯-&gt;&gt;ç”¨æˆ·: ç”¨æˆ·ç™»é™†æˆåŠŸ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> IdentityServer4 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IdentityServer4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿™æ˜¯ä¸€ç¯‡æ¥è‡ªhexo-adminçš„æµ‹è¯•æ–‡ç« </title>
      <link href="/2023/07/16/%E8%BF%99%E6%98%AF%E4%B8%80%E7%AF%87%E6%9D%A5%E8%87%AAhexo-admin%E7%9A%84%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/"/>
      <url>/2023/07/16/%E8%BF%99%E6%98%AF%E4%B8%80%E7%AF%87%E6%9D%A5%E8%87%AAhexo-admin%E7%9A%84%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<p><a name="ejMt9"></a></p><h2 id="ç™»å½•ä¼šè¯ä¿å­˜é…ç½®"><a href="#ç™»å½•ä¼šè¯ä¿å­˜é…ç½®" class="headerlink" title="ç™»å½•ä¼šè¯ä¿å­˜é…ç½®"></a>ç™»å½•ä¼šè¯ä¿å­˜é…ç½®</h2><p>IdentityServeræ³¨å†Œäº†ä¸¤ä¸ªCookieå¤„ç†ç¨‹åºç”¨äºå¤„ç†ç”¨æˆ·ç™»å½•</p><ul><li><code>IdentityServerConstants.DefaultCookieAuthenticationScheme</code> é»˜è®¤Cookieèº«ä»½éªŒè¯æ¨¡å¼</li><li><code>IdentityServerConstants.ExternalCookieAuthenticationScheme</code>å¤–éƒ¨Cookieèº«ä»½éªŒè¯æ¨¡å¼</li></ul><p>å¯ä»¥åœ¨æ³¨å…¥çš„è¿‡ç¨‹ä¸­å¯¹è¿™ä¸¤ä¸ªCookieè¿›è¡Œé…ç½®ï¼Œå¦‚è®¾ç½®æ»‘åŠ¨è¿‡æœŸæ—¶é—´ç­‰<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">builder</span><br><span class="line">    .Services.AddAuthentication()</span><br><span class="line">    .AddCookie(IdentityServerConstants.DefaultCookieAuthenticationScheme, options =&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// é…ç½®é»˜è®¤éªŒè¯æ¨¡å¼çš„æ»‘åŠ¨è¿‡æœŸæ—¶é—´ä¸º30åˆ†é’Ÿ</span></span><br><span class="line">        options.SlidingExpiration = <span class="literal">true</span>;</span><br><span class="line">        options.ExpireTimeSpan = TimeSpan.FromMinutes(<span class="number">30</span>);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥é€šè¿‡IdentityServeræŒ‡å®šç”¨äºé»˜è®¤èº«ä»½éªŒè¯å’Œå¤–éƒ¨èº«ä»½éªŒè¯çš„ä¸åŒæ¨¡å¼åç§°<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddIdentityServer(options =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æŒ‡å®šIdentityServerä½¿ç”¨ Cookies è¿›è¡Œèº«ä»½éªŒè¯ï¼›</span></span><br><span class="line">    options.Authentication.CookieAuthenticationScheme = <span class="string">"Cookies"</span>;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><br><strong>æ³¨æ„ï¼šIdentityServer åœ¨å†…éƒ¨ä½¿ç”¨è‡ªå®šä¹‰æ–¹æ¡ˆï¼ˆé€šè¿‡å¸¸é‡ï¼‰è°ƒç”¨ AddAuthentication() ï¼Œå› æ­¤è¦è¦†ç›–å®ƒä»¬ï¼Œå¿…é¡»åœ¨ AddIdentityServer() ä¹‹åè¿›è¡Œç›¸åŒçš„è°ƒç”¨ã€‚</strong><br><a name="wApZs"></a></p><h2 id="ç™»å½•æµç¨‹"><a href="#ç™»å½•æµç¨‹" class="headerlink" title="ç™»å½•æµç¨‹"></a>ç™»å½•æµç¨‹</h2><p>å½“ IdentityServer åœ¨æˆæƒç«¯ç‚¹æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç”¨æˆ·æœªç»è¿‡èº«ä»½éªŒè¯æ—¶ï¼Œç”¨æˆ·å°†è¢«é‡å®šå‘åˆ°é…ç½®çš„ç™»å½•é¡µé¢ã€‚<br />å¯ä»¥é€šè¿‡é€‰é¡¹ UserInteraction ä¸Šçš„è®¾ç½®å‘ŠçŸ¥ IdentityServer ç™»å½•é¡µé¢çš„è·¯å¾„ï¼ˆé»˜è®¤ä¸º<code>/account/login</code>ï¼‰ã€‚<br />æ­¤å¤–è¿˜å°†ä¼ é€’ä¸€ä¸ª <code>returnUrl</code> å‚æ•°ï¼Œå½“ç”¨æˆ·ç™»å½•æˆåŠŸååº”å°†ç”¨æˆ·é‡å®šå‘åˆ°ä½•å¤„ã€‚<br /></p><p><img src="/images/pasted-2.png" alt="upload successful"></p><h2 id="é€€å‡ºä¸æ³¨é”€"><a href="#é€€å‡ºä¸æ³¨é”€" class="headerlink" title="é€€å‡ºä¸æ³¨é”€"></a>é€€å‡ºä¸æ³¨é”€</h2><p>åœ¨ IdentityServer ä¸­æ³¨é”€ç”¨æˆ·åªéœ€è¦åˆ é™¤èº«ä»½éªŒè¯çš„ cookieï¼Œåªéœ€åœ¨ <code>HttpContext</code> ä¸­è°ƒç”¨ <code>SignOutAsync</code>ï¼Œå¹¶ä¼ é€’æ‰€ä½¿ç”¨çš„æ–¹æ¡ˆä½œä¸ºå‚æ•°ï¼š<br><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ IdentityServer é»˜è®¤çš„èº«ä»½éªŒè¯Cookie</span></span><br><span class="line"><span class="keyword">await</span> HttpContext.SignOutAsync(IdentityServerConstants.DefaultCookieAuthenticationScheme);</span><br></pre></td></tr></table></figure></p><p>å½“å®¢æˆ·ç«¯æ³¨é”€æ—¶ï¼Œä¼šè·³è½¬åˆ° IdentityServer æ³¨é”€ï¼Œå…¶ä»–å®¢æˆ·ç«¯å†æ¬¡è®¿é—® IdentityServer è·å–ç”¨æˆ·æˆæƒæ—¶æ‰ä¼šå¾—çŸ¥å½“å‰ç”¨æˆ·å·²æ³¨é”€ã€‚<br />å¦‚æœéœ€è¦åœ¨å®¢æˆ·ç«¯ä¸­æ³¨é”€ï¼Œå¹¶é€šçŸ¥å…¶ä»–å·²ç™»é™†çš„å®¢æˆ·ç«¯åŒæ—¶æ³¨é”€æ—¶ã€‚æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼<br><a name="mhTo0"></a></p><h3 id="å‰ç«¯é€šé“"><a href="#å‰ç«¯é€šé“" class="headerlink" title="å‰ç«¯é€šé“"></a>å‰ç«¯é€šé“</h3><p>å½“ç”¨æˆ·è¿›è¡Œæ³¨é”€æ—¶ï¼ŒIdentityServer ä¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªéšè—å¼ <code>&lt;iframe&gt;</code> æ ‡ç­¾çš„é¡µé¢ã€‚<br />æµè§ˆå™¨åœ¨æ³¨é”€é¡µé¢åŠ è½½å®Œæˆåä¼šè‡ªåŠ¨è°ƒç”¨ <code>iframe</code> ä¸­æŒ‡å®šçš„URL ï¼ˆåœ¨ IdentityServer ä¸­é€šè¿‡ <code>FrontChannelLogoutUri</code> é…ç½®ï¼‰å‘ŠçŸ¥å¯¹åº”çš„å®¢æˆ·ç«¯ç¨‹åºç”¨æˆ·æ³¨é”€ã€‚<br />IdentityServer ä¼šè·Ÿè¸ªç”¨æˆ·å·²ç™»é™†çš„å®¢æˆ·ç«¯ï¼Œå½“ç”¨æˆ·æ³¨é”€ç™»å½•æ—¶ï¼ŒIdentityServer ä¼šè°ƒç”¨ <code>IIdentityServerInteractionService</code>ä¸­çš„ <code>GetLogoutContextAsync()</code> æ–¹æ³•ï¼Œ<br />å¹¶è¿”å›ä¸€ä¸ªå¸¦æœ‰ <code>SignOutIFrameUrl</code> å±æ€§çš„ <code>LogoutRequest</code> å¯¹è±¡ï¼Œ<code>SignOutIFrameUrl</code> ä¸­åŒ…å«éœ€è¦æ¸²æŸ“åœ¨ <code>&lt;iframe&gt;</code> ä¸Šçš„å·²ç™»é™†å®¢æˆ·ç«¯ä¿¡æ¯ã€‚<br><a name="WPCkI"></a></p><h3 id="åç«¯é€šé“"><a href="#åç«¯é€šé“" class="headerlink" title="åç«¯é€šé“"></a>åç«¯é€šé“</h3><p>ä¸å‰ç«¯é€šé“ç±»ä¼¼çš„ï¼ŒIdentityServer åœ¨ç”¨æˆ·æ³¨é”€ç™»å½•æ—¶ï¼Œä¼šè°ƒç”¨ <code>IBackChannelLogoutService</code> ä¸­çš„ <code>HttpContext.SignOutAsync()</code> è¿›è¡Œæ³¨é”€ç™»å½•ã€‚<br />éœ€è¦åŒæ—¶ç™»å‡ºçš„å®¢æˆ·ç«¯éœ€è¦é…ç½® <code>BackChannelLogoutUri</code>ã€‚<br><a name="iFu8H"></a></p><h3 id="ä¼šè¯ç®¡ç†"><a href="#ä¼šè¯ç®¡ç†" class="headerlink" title="ä¼šè¯ç®¡ç†"></a>ä¼šè¯ç®¡ç†</h3><p>é€šè¿‡ä¼šè¯ç®¡ç†å½¢å¼è¿›è¡Œæ³¨é”€æ§åˆ¶çš„å®¢æˆ·ç«¯ä¸éœ€è¦è¿›è¡Œæ‰§è¡Œå…¶ä»–æ“ä½œï¼Œä¸è¿‡å®¢æˆ·ç«¯ä¼šç›‘è§† IdentityServer ä¸­çš„ <code>check_session_iframe</code> ç«¯ç‚¹ï¼Œç”¨æˆ·ç™»å‡ºåï¼Œoidc-client JavaScript åº“ä¼šè‡ªåŠ¨å°†å½“å‰ç”¨æˆ·æ³¨é”€ã€‚</p><p><a name="WCZGx"></a></p><h2 id="å®¢æˆ·ç«¯æ³¨é”€"><a href="#å®¢æˆ·ç«¯æ³¨é”€" class="headerlink" title="å®¢æˆ·ç«¯æ³¨é”€"></a>å®¢æˆ·ç«¯æ³¨é”€</h2><p>åœ¨å®¢æˆ·ç«¯å‘èµ·æ³¨é”€ç™»å½•æ—¶ï¼Œä¼šå°†å½“å‰ç”¨æˆ·é‡å®šå‘åˆ° IdentityServer çš„ <code>end session endpoint</code> ç«¯ç‚¹ä¸Šã€‚IdentityServer ä¼šå¯¹ç”¨æˆ·çš„çŠ¶æ€è¿›è¡Œç»´æŠ¤ï¼Œå¹¶å°†å®¢æˆ·ç«¯é‡å®šå‘åˆ°å¯¹åº”çš„URLï¼ˆå¦‚æœé…ç½®äº†çš„è¯ï¼‰ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Hexo-Theme-Snail</title>
      <link href="/2019/11/01/Hexo-Theme-Snail/"/>
      <url>/2019/11/01/Hexo-Theme-Snail/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo-theme-snail"><a href="#hexo-theme-snail" class="headerlink" title="hexo-theme-snail"></a>hexo-theme-snail</h1><p><a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">View Hexo-Theme-Snail Sources On Github &#10174; </a></p><p><a href="https://www.dusign.net" target="_blank" rel="noopener">View Live Super Snail Blog &#10174;</a></p><p><img src="snail.png" alt="hexo-theme-snail"></p><p>Hexo-theme-snail is a succinct hexo theme. It has two colors, light and star, that can be set according to your own preferences in the settings, and also has the functions of sharing and commenting. More features are under development.</p><h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><ul><li>light color theme and star theme</li><li>diversified comment system</li><li>notice tips</li><li>share to other platforms (under development)</li><li>picture sharing (under development)</li></ul><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-cli -g</span><br></pre></td></tr></table></figure><h3 id="Setup-your-blog"><a href="#Setup-your-blog" class="headerlink" title="Setup your blog"></a>Setup your blog</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init blog</span><br></pre></td></tr></table></figure><h3 id="Installation-Theme"><a href="#Installation-Theme" class="headerlink" title="Installation Theme"></a>Installation Theme</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ rm -rf <span class="built_in">source</span></span><br><span class="line">$ rm _config.yml package.json README.md LICENSE</span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/dusign/hexo-theme-snail.git</span><br><span class="line">$ mv ./hexo-theme-snail/snail ./themes</span><br><span class="line">$ mv ./hexo-theme-snail/* ./</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><h3 id="Set-Theme"><a href="#Set-Theme" class="headerlink" title="Set Theme"></a>Set Theme</h3><p>Modify the value of <code>theme:</code> in <code>_config.yml</code><br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">snail</span></span><br></pre></td></tr></table></figure></p><h3 id="Start-the-Server"><a href="#Start-the-Server" class="headerlink" title="Start the Server"></a>Start the Server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><h3 id="Site"><a href="#Site" class="headerlink" title="Site"></a>Site</h3><p>Replace the following information with your own.<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> </span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">At</span> <span class="string">the</span> <span class="string">bottom</span> <span class="string">of</span> <span class="string">the</span> <span class="string">well,</span> <span class="string">it</span> <span class="string">is</span> <span class="string">destined</span> <span class="string">to</span> <span class="string">see</span> <span class="string">only</span> <span class="string">the</span> <span class="string">sky</span> <span class="string">at</span> <span class="string">the</span> <span class="string">wellhead.</span> </span><br><span class="line">          <span class="string">However,</span> <span class="string">the</span> <span class="string">starting</span> <span class="string">point</span> <span class="string">only</span> <span class="string">affects</span> <span class="string">the</span> <span class="string">process</span> <span class="string">of</span> <span class="string">reaching</span> <span class="string">your</span> <span class="string">peak</span> <span class="string">and</span> <span class="string">does</span> <span class="string">not</span> <span class="string">determine</span> <span class="string">the</span> <span class="string">height</span> <span class="string">you</span> <span class="string">reach.</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Dusign</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">en</span></span><br><span class="line"><span class="attr">timezone:</span></span><br></pre></td></tr></table></figure></p><h3 id="Site-Settings"><a href="#Site-Settings" class="headerlink" title="Site Settings"></a>Site Settings</h3><p>Put customized pictures in <code>img</code> directory.<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site settings</span></span><br><span class="line"><span class="attr">SEOTitle:</span> <span class="string">Hexo-theme-snail</span></span><br><span class="line"><span class="attr">email:</span> <span class="string">hexo-theme-snail@mail.com</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">"A hexo theme"</span></span><br><span class="line"><span class="attr">keyword:</span> <span class="string">"dusign, hexo-theme-snail"</span></span><br><span class="line"><span class="attr">header-img:</span> <span class="string">img/header_img/home-bg-1-dark.jpg</span></span><br><span class="line"><span class="attr">signature:</span> <span class="literal">true</span> <span class="comment">#show signature</span></span><br><span class="line"><span class="attr">signature-img:</span> <span class="string">img/signature/Just-do-it-white.png</span></span><br></pre></td></tr></table></figure></p><h3 id="SNS-Settings"><a href="#SNS-Settings" class="headerlink" title="SNS Settings"></a>SNS Settings</h3><p>If you donâ€™t want to display it, you can delete it directly.<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SNS settings</span></span><br><span class="line"><span class="attr">github_username:</span>    <span class="string">dusign</span></span><br><span class="line"><span class="attr">twitter_username:</span>   <span class="string">dusignr</span></span><br><span class="line"><span class="attr">facebook_username:</span>  <span class="string">Gang</span> <span class="string">Du</span></span><br><span class="line"><span class="attr">zhihu_username:</span> <span class="string">dusignr</span></span><br></pre></td></tr></table></figure></p><h3 id="Sidebar-Settings"><a href="#Sidebar-Settings" class="headerlink" title="Sidebar Settings"></a>Sidebar Settings</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sidebar Settings</span></span><br><span class="line"><span class="attr">sidebar:</span> <span class="literal">true</span>                      <span class="comment"># whether or not using Sidebar.</span></span><br><span class="line"><span class="attr">sidebar-about-description:</span> <span class="string">"Welcome to visit, I'm Dusign!"</span></span><br><span class="line"><span class="attr">sidebar-avatar:</span> <span class="string">img/ironman-draw.png</span>      <span class="comment"># use absolute URL, seeing it's used in both `/` and `/about/`</span></span><br><span class="line"><span class="attr">widgets:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">featured-tags</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">short-about</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">recent-posts</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">friends-blog</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">archive</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">category</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># widget behavior</span></span><br><span class="line"><span class="comment">## Archive</span></span><br><span class="line"><span class="attr">archive_type:</span> <span class="string">'monthly'</span></span><br><span class="line"><span class="attr">show_count:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Featured Tags</span></span><br><span class="line"><span class="attr">featured-tags:</span> <span class="literal">true</span>                     <span class="comment"># whether or not using Feature-Tags</span></span><br><span class="line"><span class="attr">featured-condition-size:</span> <span class="number">1</span>              <span class="comment"># A tag will be featured if the size of it is more than this condition value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Friends</span></span><br><span class="line"><span class="attr">friends:</span> <span class="string">[</span></span><br><span class="line">    <span class="string">&#123;</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">"Dusign's Blog"</span><span class="string">,</span></span><br><span class="line">        <span class="attr">href:</span> <span class="string">"https://blog.csdn.net/d_Nail"</span></span><br><span class="line">    <span class="string">&#125;,&#123;</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">"Dusign's Web"</span><span class="string">,</span></span><br><span class="line">        <span class="attr">href:</span> <span class="string">"#"</span></span><br><span class="line">    <span class="string">&#125;,&#123;</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">"Dusign's Github"</span><span class="string">,</span></span><br><span class="line">        <span class="attr">href:</span> <span class="string">"https://github.com/dusign"</span></span><br><span class="line">    <span class="string">&#125;,&#123;</span></span><br><span class="line">        <span class="attr">title:</span> <span class="string">"Other"</span><span class="string">,</span></span><br><span class="line">        <span class="attr">href:</span> <span class="string">"#"</span></span><br><span class="line">    <span class="string">&#125;</span></span><br><span class="line"><span class="string">]</span></span><br></pre></td></tr></table></figure><h3 id="Theme"><a href="#Theme" class="headerlink" title="Theme"></a>Theme</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">snail</span></span><br></pre></td></tr></table></figure><h3 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">      <span class="attr">github:</span> <span class="string">github.repository.address</span></span><br><span class="line">      <span class="attr">coding:</span> <span class="string">coding.repository.address</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h3><p>See httpymls://github.com/imsun/gitment for detailed configuration method.<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Comment</span></span><br><span class="line"><span class="comment">## This comment system is gitment</span></span><br><span class="line"><span class="comment">## gitment url: https://github.com/imsun/gitment</span></span><br><span class="line"><span class="attr">comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">owner:</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">  <span class="attr">client_id:</span></span><br><span class="line">  <span class="attr">client_secret:</span></span><br></pre></td></tr></table></figure></p><h3 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a>Tip</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Tip</span></span><br><span class="line"><span class="attr">tip:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">content:</span> <span class="string">æ¬¢è¿è®¿é—®</span> <span class="string">&lt;a</span> <span class="string">href="https://www.dusign.net"</span> <span class="string">target="dusign"&gt;dusign&lt;/a&gt;</span> <span class="string">çš„åšå®¢ï¼Œåšå®¢ç³»ç»Ÿä¸€é”®åˆ†äº«çš„åŠŸèƒ½è¿˜åœ¨å®Œå–„ä¸­ï¼Œè¯·å¤§å®¶è€å¿ƒç­‰å¾…ã€‚</span></span><br><span class="line">          <span class="string">è‹¥æœ‰é—®é¢˜æˆ–è€…æœ‰å¥½çš„å»ºè®®æ¬¢è¿ç•™è¨€ï¼Œç¬”è€…çœ‹åˆ°ä¹‹åä¼šåŠæ—¶å›å¤ã€‚</span></span><br><span class="line">          <span class="string">è¯„è®ºç‚¹èµéœ€è¦githubè´¦å·ç™»å½•ï¼Œå¦‚æœæ²¡æœ‰è´¦å·çš„è¯è¯·ç‚¹å‡»</span> </span><br><span class="line">          <span class="string">&lt;a</span> <span class="string">href="https://github.com"</span> <span class="string">target="view_window"</span> <span class="string">&gt;</span> <span class="string">github</span> <span class="string">&lt;/a&gt;</span> <span class="string">æ³¨å†Œï¼Œ</span> <span class="string">è°¢è°¢</span> <span class="string">!</span></span><br></pre></td></tr></table></figure><h3 id="Color-Sheme"><a href="#Color-Sheme" class="headerlink" title="Color Sheme"></a>Color Sheme</h3><p>Set the <code>enable</code> value of the desired color sheme to <code>true</code>. If the value of <code>bg_effects.star.enable</code> is <code>true</code>, please modify the value of <code>highlight_theme</code> in <code>./themes/snail/_config.yml</code> to <code>night</code>.<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Color Sheme</span></span><br><span class="line"><span class="comment">## If there is no effect after modification, please empty the cache and try again.</span></span><br><span class="line"><span class="comment">## âš ï¸ The following special effects will take up a lot of cpu resorces, please open it carefully.</span></span><br><span class="line"><span class="attr">bg_effects:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">line:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">color:</span> <span class="number">129</span><span class="string">,200,61</span></span><br><span class="line">    <span class="attr">pointColor:</span> <span class="number">129</span><span class="string">,200,61</span></span><br><span class="line">    <span class="attr">opacity:</span> <span class="number">0.7</span></span><br><span class="line">    <span class="attr">zIndex:</span> <span class="number">-9</span></span><br><span class="line">    <span class="attr">count:</span> <span class="number">99</span></span><br><span class="line">  <span class="attr">mouse_click:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">content:</span> <span class="string">'"ğŸŒ±","just do it","ğŸŒ¾","ğŸ€","don'</span><span class="string">'t give up","ğŸ‚","ğŸŒ»","try it again","ğŸƒ","never say die","ğŸŒµ","ğŸŒ¿","ğŸŒ´"'</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">'"rgb(121,93,179)"</span></span><br><span class="line"><span class="string">          ,"rgb(76,180,231)"</span></span><br><span class="line"><span class="string">          ,"rgb(184,90,154)"</span></span><br><span class="line"><span class="string">          ,"rgb(157,211,250)"</span></span><br><span class="line"><span class="string">          ,"rgb(255,0,0)"</span></span><br><span class="line"><span class="string">          ,"rgb(242,153,29)"</span></span><br><span class="line"><span class="string">          ,"rgb(23,204,16)"</span></span><br><span class="line"><span class="string">          ,"rgb(222,0,0)"</span></span><br><span class="line"><span class="string">          ,"rgb(22,36,92)"</span></span><br><span class="line"><span class="string">          ,"rgb(127,24,116)"</span></span><br><span class="line"><span class="string">          ,"rgb(119,195,79)"</span></span><br><span class="line"><span class="string">          ,"rgb(4,77,34)"</span></span><br><span class="line"><span class="string">          ,"rgb(122,2,60)"'</span></span><br><span class="line">  <span class="attr">star:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></p><h2 id="Releases"><a href="#Releases" class="headerlink" title="Releases"></a>Releases</h2><p>V1.0</p><ul><li>fix the bugs</li><li>add comment system</li><li>add notice tips</li><li>add star sheme</li></ul><h2 id="License"><a href="#License" class="headerlink" title="License"></a>License</h2><p>Apache License 2.0 Copyright(c) 2018-2020 <a href="https://github.com/dusign" target="_blank" rel="noopener">Dusign</a>   </p><p><a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">hexo-theme-snail</a> is derived from <a href="https://github.com/Huxpro/huxpro.github.io" target="_blank" rel="noopener">Huxpro</a> Apache License 2.0. Copyright (c) 2015-2020 Huxpro</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo-theme-snail </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
